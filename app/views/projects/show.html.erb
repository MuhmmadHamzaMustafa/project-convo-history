<h1><%= @project.title %></h1>
<p class="text-muted"><%= @project.description %></p>
<p><strong>Status:</strong> <%= @project.status.name %></p>

<div class="project-actions">
  <%= link_to 'Edit', edit_project_path(@project) %>
  <%= link_to 'Back', projects_path %>
</div>

<h3>Comments</h3>
<%= form_with model: [@project, @comment] do |form| %>
  <div class="form-group">
    <%= form.text_area :body, class: 'form-control', placeholder: 'Add a comment...' %>
  </div>
  <%= form.submit 'Post Comment', class: 'btn btn-primary' %>
<% end %>

<div class="comments-list">
  <% @comments.each do |comment| %>
    <div class="comment">
      <div class="comment-header">
        <strong><%= comment.user.email %></strong>
        <span class="text-muted"><%= time_ago_in_words(comment.created_at) %> ago</span>
        <% if comment.user == current_user %>
          <%= link_to 'Delete', project_comment_path(@project, comment), method: :delete %>
        <% end %>
      </div>
      <p><%= comment.body %></p>
    </div>
  <% end %>
</div>

<h3>Activity Feed</h3>
<div class="activity-feed">
  <% @activities.each do |activity| %>
    <div class="activity-item">
      <%= render_activity activity %>
      <span class="text-muted"><%= time_ago_in_words(activity.created_at) %> ago</span>
    </div>
  <% end %>
</div>

<%= paginate @activities %>